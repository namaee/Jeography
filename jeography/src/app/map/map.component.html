<div class="map-container">
  <!-- <div class="map" (mouseover)="onHover($event)" (mouseout)="onLeave($event)" (click)="onClick($event)" inlineSVG={{map}}></div> -->
<!-- <?xml version="1.0" encoding="UTF-8" standalone="no"?> -->
<!-- Created for MapSVG plugin: http://mapsvg.com -->
<!-- <svg:g>
  <circle class="map-buttons" cx="-40" cy="40" r="15">
  </circle> -->
  <div class="map-button-container">
    <button class="map-button" (click)="onReset()" [class.mat-elevation-z0]="true" mat-fab color="primary" disableRipple>
      <mat-icon>refresh</mat-icon>
    </button>
    <button class="map-button" (click)="onZoomIn()" [disabled]="zoomLevel > 17" [ngClass]="{'map-button-disabled': zoomLevel > 17}" [class.mat-elevation-z0]="true" mat-fab color="primary" disableRipple>
      <mat-icon>add</mat-icon>
    </button>
    <button class="map-button" (click)="onZoomOut()" [disabled]="zoomLevel == 1" [ngClass]="{'map-button-disabled': zoomLevel == 1}" [class.mat-elevation-z0]="true" mat-fab color="primary" disableRipple>
      <mat-icon>remove</mat-icon>
    </button>
  </div>

    <!-- </svg:g> -->
<div class="map-drag" mapDrag (wheel)="onwheel($event)">
  <svg
  xmlns:mapsvg="http://mapsvg.com"
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:svg="http://www.w3.org/2000/svg"
  xmlns="http://www.w3.org/2000/svg"
  mapsvg:geoViewBox="123.658963 45.523885 145.820743 24.217586"
  viewBox="40 -10 400 550"
  width="800"
  height="800"
  preserveAspectRatio="xMidYMid meet"
  class="map"
  [ngStyle]="mapStyle"
  [ngClass]="{'map-pref': mapService.mode == modeEnum.PREF, 'map-cit': mapService.mode == modeEnum.CIT}"
  
  >

  <!-- prefectures -->
  <g *ngIf="mapService.mode == modeEnum.PREF">
    <path *ngFor="let prefSvg of prefecturesSvg" [attr.d]="prefSvg.d" [attr.title]="prefSvg.title" 
    [ngClass]="{'active-prefecture': active == prefSvg.title && state == stateEnum.VIEW}"
    [ngStyle]="mapPaths"
    [matTooltip]="prefSvg.title" matTooltipPosition="right" matTooltipClass="path-tooltip" 
    [matTooltipDisabled]="(mapDrag ? mapDrag.dirty : false) || state == stateEnum.QUIZ"
    (click)="onClick($event)"
    ></path>
  </g>

  <!-- regions -->
  <g *ngIf="mapService.mode == modeEnum.REG" 
  transform="translate(87.402329,-95.007708)">
    <g transform="matrix(0.65068506,0,0,0.65068506,-49.459746,-158.34468)">
      <path *ngFor="let prefSvg of regionsSvg" [attr.d]="prefSvg.d" [attr.title]="prefSvg.title" 
      [ngClass]="{'active-prefecture': active == prefSvg.title && state == stateEnum.VIEW}"
      [ngStyle]="mapPaths"
      [matTooltip]="prefSvg.title" matTooltipPosition="right" matTooltipClass="path-tooltip" [matTooltipDisabled]="(mapDrag ? mapDrag.dirty : false) || state == stateEnum.QUIZ"
      (click)="onClick($event)"
      ></path>
    </g>
  </g>

  <!-- cities -->
  <g *ngIf="mapService.mode == modeEnum.CIT">
    <path *ngFor="let prefSvg of prefecturesSvg" [attr.d]="prefSvg.d" [attr.title]="prefSvg.title" 
    [ngStyle]="mapPaths"
    ></path>

    <circle *ngFor="let citySvg of citiesSvg" class="circle" 
    [ngStyle]="cityCircles" 
    [attr.title]="citySvg.title" [attr.cx]= "citySvg.cx" [attr.cy]="citySvg.cy" 
    [attr.r]="0.5 + 1 / (zoomLevel / 2)" [attr.stroke-width]="0.2 + 0.5 / (zoomLevel / 2)" 
    [matTooltip]="citySvg.title" matTooltipPosition="above" matTooltipClass="circle-tooltip"
    (click)="onClick($event)"
    ></circle>
    <!-- <circle class="circle" cx="316.8" cy="255.8" [attr.r]="0.5 + 1 / (zoomLevel / 2)" stroke="black" [attr.stroke-width]="0.2 + 0.5 / (zoomLevel / 2)" fill="red" ></circle> -->
    <!-- <circle class="circle" cx="200px" cy="200px" r="50" stroke="black" stroke-width="3" fill="red" ></circle> -->

  </g>


</svg>
</div>
<!-- <object class="map" type="image/svg+xml" data="../../assets/japan.svg"></object> -->
</div>
